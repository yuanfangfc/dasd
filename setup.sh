#!/bin/bash

# -------------------------------------------------
# Author: å…ƒèŠ³
# Description: ä¸€é”®è‡ªåŠ¨éƒ¨ç½² + è‡ªåŠ¨æ¨é€ + è‡ªåŠ¨åŒ–å†…å®¹ç”Ÿæˆ + å®å¡”é¢æ¿å¯¹æ¥
# -------------------------------------------------

# ----------------------------------------
# æ›´æ–°ç³»ç»Ÿå’Œå®‰è£…å¿…å¤‡è½¯ä»¶
# ----------------------------------------

echo "ğŸš€ [INFO] æ›´æ–°ç³»ç»Ÿ..."
sudo apt update && sudo apt upgrade -y

echo "ğŸ‘‰ [STEP] å®‰è£…å¿…è¦å·¥å…·..."
sudo apt install -y python3 python3-pip docker.io docker-compose git curl

# ----------------------------------------
# å®‰è£…ä¾èµ– Python ç¯å¢ƒ
# ----------------------------------------

echo "ğŸ‘‰ [STEP] å®‰è£… Python åº“..."
pip3 install -r requirements.txt

# ----------------------------------------
# è·å– GitHub ä»“åº“å¹¶æ¨é€
# ----------------------------------------

echo "ğŸ‘‰ [STEP] å…‹éš†æœ€æ–°çš„ GitHub ä»“åº“..."
git clone https://github.com/YOUR_REPO/your_project.git

cd your_project

echo "ğŸ‘‰ [STEP] æäº¤åˆ° GitHub..."
git add .
git commit -m "è‡ªåŠ¨æ¨é€ï¼š$(date '+%Y-%m-%d %H:%M:%S')"
git push origin main

# ----------------------------------------
# å¯åŠ¨ Docker å®¹å™¨
# ----------------------------------------

echo "ğŸ‘‰ [STEP] å¯åŠ¨ Docker å®¹å™¨..."
sudo docker-compose up -d

# ----------------------------------------
# è‡ªåŠ¨ç”Ÿæˆå†…å®¹
# ----------------------------------------

echo "ğŸ‘‰ [STEP] ç”Ÿæˆå†…å®¹..."
python3 ai_content_gen.py

# ----------------------------------------
# å®å¡”é¢æ¿åˆ›å»ºç½‘ç«™å’Œ SSL é…ç½®
# ----------------------------------------

echo "ğŸ‘‰ [STEP] è°ƒç”¨å®å¡” API åˆ›å»ºç½‘ç«™..."
bash bt_panel_api.sh

echo "âœ… [DONE] éƒ¨ç½²æˆåŠŸï¼ğŸ‰"
