#!/usr/bin/env bash

# ==========================================================
# ğŸš€ Ubuntu 20.x å…¨è‡ªåŠ¨å®‰è£…å®å¡”é¢æ¿ï¼ˆå…äº¤äº’ï¼‰
# ğŸ§¾ ä½œè€…: ä¸“ä¸šä»£ç åŠ©ç† GPT
# ğŸ’¡ é€‚é…ç¯å¢ƒ: Ubuntu 20.04+
# ==========================================================

# ------------------------------
# 1ï¸âƒ£ å®šä¹‰é¢œè‰²è¾“å‡ºå‡½æ•°
# ------------------------------
print_info() {
    echo -e "\033[1;32m[INFO]\033[0m $1"
}

print_error() {
    echo -e "\033[1;31m[ERROR]\033[0m $1"
}

# ------------------------------
# 2ï¸âƒ£ æ£€æŸ¥æ˜¯å¦ä¸º root ç”¨æˆ·
# ------------------------------
if [ "$(id -u)" -ne 0 ]; then
    print_error "è¯·ä½¿ç”¨ root ç”¨æˆ·è¿è¡Œæ­¤è„šæœ¬ï¼"
    exit 1
fi

# ------------------------------
# 3ï¸âƒ£ æ›´æ–°ç³»ç»ŸåŒ…ç´¢å¼•
# ------------------------------
print_info "æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…ç´¢å¼•..."
apt update -y

# ------------------------------
# 4ï¸âƒ£ å®‰è£… curl/wgetï¼ˆè‹¥æœªå®‰è£…ï¼‰
# ------------------------------
print_info "æ£€æŸ¥å¹¶å®‰è£… curl å’Œ wget..."
apt install -y curl wget sudo lsb-release

# ------------------------------
# 5ï¸âƒ£ è®¾ç½® DEBIAN_FRONTEND ä»¥é¿å…äº¤äº’
# ------------------------------
export DEBIAN_FRONTEND=noninteractive

# ------------------------------
# 6ï¸âƒ£ å¯åŠ¨å®å¡”å®˜æ–¹å®‰è£…ï¼ˆè‡ªåŠ¨ç¡®è®¤ï¼‰
# ------------------------------
print_info "å¼€å§‹å®‰è£…å®å¡”é¢æ¿..."
# å®˜æ–¹å®‰è£…å‘½ä»¤ï¼Œæœ«å°¾è¿½åŠ  -y å‚æ•°æˆ–è‡ªåŠ¨è¾“å…¥ echo y
# è¿™é‡Œç”¨ curl å®‰è£…è„šæœ¬åè‡ªåŠ¨æ‰§è¡Œ
curl -sSO http://download.bt.cn/install/install_ubuntu.sh

# ä½¿ç”¨ echo y | bash æ–¹å¼å®ç°è‡ªåŠ¨åŒæ„
echo y | bash install_ubuntu.sh

# ------------------------------
# 7ï¸âƒ£ æ¸…ç†ä¸´æ—¶æ–‡ä»¶
# ------------------------------
rm -f install_ubuntu.sh

# ------------------------------
# 8ï¸âƒ£ å®‰è£…å®Œæˆæç¤º
# ------------------------------
print_info "å®å¡”é¢æ¿å®‰è£…å·²å®Œæˆï¼Œè¯·æ ¹æ®è¾“å‡ºä¿¡æ¯è®¿é—®é¢æ¿ URL ç™»å½•ï¼"
